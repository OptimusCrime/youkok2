var Youkok=(function(module){var courses;module.search={init:function(){Youkok.search.initBloodhound();Youkok.search.initTypeahead();$('#s, #s2').on('keyup',Youkok.search.searchEnter);$('#nav-search, #nav-search2').on('click',Youkok.search.searchSelect)},initBloodhound:function(){courses=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace('course'),queryTokenizer:Bloodhound.tokenizers.whitespace,limit:10,prefetch:'processor/search/courses.json',});courses.initialize()},initTypeahead:function(){if(Youkok.getData('cache_time')!=localStorage.getItem('ts')){localStorage.clear();localStorage.setItem('ts',Youkok.getData('cache_time'))}$('#prefetch .typeahead, #prefetch2 .typeahead').typeahead({hint:true,highlight:true,},{name:'courses',displayKey:'course',source:courses.ttAdapter(),}).on('typeahead:selected',function($e,datum){Youkok.search.searchSubmit($e.target.id)})},searchEnter:function(e){if(e.keyCode==13){Youkok.search.searchSubmit(this.id)}},searchSelect:function(){Youkok.search.searchSubmit($(this).parent().find('.tt-input').attr('id'))},searchSubmit:function(target){var val=$('#'+target).val();var datums=courses.index.datums;var datums_size=datums.length;var was_found=false;for(var i=0;i<datums_size;i++){var current_datum=datums[i];if(current_datum.course==val){was_found=true;window.location=Youkok.getData('search_base')+current_datum.url;break}}if(!was_found){$('#'+target).parent().parent().parent().submit()}},};return module})(Youkok||{});;var Youkok=(function(module){module.frontpage={init:function(){$('#home-most-popular-dropdown li').on('click',Youkok.frontpage.changeMostPopular);$('#home-most-popular-dropdown li').on('click',Youkok.frontpage.changeMostPopular);$('.star-remove').on('click',Youkok.frontpage.removeFavorite)},changeMostPopular:function(e){e.preventDefault();$('#home-most-popular-selected').html($('a',this).html());$('#home-most-popular-dropdown li').removeClass('disabled');$(this).addClass('disabled');$.ajax({cache:false,type:"post",url:"processor/module/update",data:{id:0,delta:$('a',$(this)).data('delta')},success:function(json){if(json.code==200){$('#home-most-popular').slideUp(400,function(){$(this).html(json.html).slideDown(400);$('#home-most-popular a').tooltip()})}else{alert('Noe gikk visst galt her. Ups!')}}})},removeFavorite:function(){$el=$(this);if(!$el.data('disabled')){$el.data('disabled','true');$.ajax({cache:false,type:"post",url:'processor/favorite',data:{id:$el.data('id'),type:'remove'},success:function(json){if(json.code==200){$el.parent().slideUp(function(){$(this).remove();if($('#favorites-list li').length==0){$('#favorites-list').html('<li class="list-group-item" style="display: none;"><em>Du har ingen favoritter...</em></li>');$('#favorites-list li').slideDown()}});Youkok.message.add(json.msg)}else{alert('Noe gikk visst galt her. Ups!');$el.removeData('disabled')}}})}},};return module})(Youkok||{});;$(document).ready(function(){Youkok.init()});;var Youkok=(function(module){module.pattern={init:function(){},};return module})(Youkok||{});;var Youkok=(function(module){module.utilities={validateEmail:function(email){var rgx=new RegExp("/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i");return rgx.test(email)},validateUrl:function(url){var rgx=new RegExp("^(http[s]?:\\/\\/(www\\.)?|ftp:\\/\\/(www\\.)?|www\\.){1}([0-9A-Za-z-\\.@:%_\+~#=]+)+((\\.[a-zA-Z]{2,3})+)(/(.)*)?(\\?(.)*)?");return rgx.test(url)},prettyFileSize:function(bytes,si){var thresh=si?1000:1024;if(bytes<thresh){return bytes+' B'}var units=si?['kB','MB','GB','TB','PB','EB','ZB','YB']:['KiB','MiB','GiB','TiB','PiB','EiB','ZiB','YiB'];var u=-1;do{bytes=division(bytes,thresh);++u}while(bytes>=thresh);return bytes.toFixed(1)+' '+units[u]},};return module})(Youkok||{});;var Youkok=(function(module){module.debug={init:function(){$('#toggle-queries').on('click',Youkok.debug.toggleQueries);$('#toggle-cache-loads').on('click',Youkok.debug.toggleCache)},toggleQueries:function(e){e.preventDefault();var $that=$(this);if($('#cache-load').is(':visible')){$('#cache-load').slideUp(400,function(){$('#toggle-cache-loads span').html('Vis')})}if($('#queries').is(':visible')){$('#queries').slideUp(400,function(){$('span',$that).html('Vis')})}else{$('#queries').slideDown(400,function(){$('span',$that).html('Skjul')})}},toggleCache:function(e){e.preventDefault();var $that=$(this);if($('#queries').is(':visible')){$('#queries').slideUp(400,function(){$('#toggle-queries span').html('Vis')})}if($('#cache-load').is(':visible')){$('#cache-load').slideUp(400,function(){$('span',$that).html('Vis')})}else{$('#cache-load').slideDown(400,function(){$('span',$that).html('Skjul')})}},};return module})(Youkok||{});;var Youkok=(function(module){module.archive={init:function(){$('.archive-item-dropdown').on('click',Youkok.archive.itemDropdownOpen);$('.archive-dropdown-close').on('click',Youkok.archive.itemDropdownClose);Youkok.archive.getHistory();Youkok.countdown.init();if(Youkok.getData('online')==true){Youkok.archive.initOnline()}},initOnline:function(){$('#archive-heading-star').on('click',Youkok.archive.toggleFavorite)},toggleFavorite:function(){var $that=$(this);var favorite_type='add';if($that.hasClass('archive-heading-star-1')){favorite_type='remove'}$.ajax({cache:false,type:"post",url:'processor/favorite',data:{id:$that.data('archive-id'),type:favorite_type},success:function(json){if(json.code==200){if(favorite_type=='add'){$that.removeClass('archive-heading-star-0').addClass('archive-heading-star-1')}else{$that.removeClass('archive-heading-star-1').addClass('archive-heading-star-0')}Youkok.message.add(json.msg)}else{alert('Noe gikk visst galt her. Ups!')}}})},itemDropdownOpen:function(){var $caret=$('i',this);var $dropdown=$('.archive-dropdown-content',this);if($dropdown.is(':visible')){$dropdown.slideUp(400,function(){$caret.removeClass('fa-caret-up').addClass('fa-caret-down')})}else{$dropdown.slideDown(400,function(){$caret.removeClass('fa-caret-down').addClass('fa-caret-up')})}},itemDropdownClose:function(e){e.preventDefault();$(this).parent().parent().parent().parent().find('.archive-item-dropdown-arrow').trigger('click')},getHistory:function(){$.ajax({cache:false,type:"post",url:"processor/history/get",data:{id:Youkok.getData('archive_id'),},success:function(json){$('#archive-history ul').html(json.html)}})}};return module})(Youkok||{});;var Youkok=(function(module){var template='<div class="time">';template+='    <span class="count curr top">00</span>';template+='    <span class="count next top">00</span>';template+='    <span class="count next bottom">00</span>';template+='    <span class="count curr bottom">00</span>';template+='    <span class="label"></span>';template+='</div>';var labels=['dager','timer','minutter','sekunder'],currDate='00:00:00:00',nextDate='00:00:00:00',$countdown_container=$('.countdown-wrapper');function strfobj(str){var parsed=str.split(':'),obj={};labels.forEach(function(label,i){obj[label]=parsed[i]});return obj}function diff(obj1,obj2){var diff=[];labels.forEach(function(key){if(obj1[key]!==obj2[key]){diff.push(key)}});return diff}module.countdown={init:function(){var initData=strfobj(currDate);labels.forEach(function(label,i){var $section=$($.parseHTML(template));$section.addClass(label);$section.find('.label').html(label);$countdown_container.append($section)});$countdown_container.countdown($countdown_container.data('exam'),function(event){var newDate=event.strftime('%D:%H:%M:%S'),data;if(newDate!==nextDate){currDate=nextDate;nextDate=newDate;data={'curr':strfobj(currDate),'next':strfobj(nextDate)};diff(data.curr,data.next).forEach(function(label){var selector='.%s'.replace(/%s/,label),$node=$countdown_container.find(selector);$node.removeClass('flip');$node.find('.curr').text(data.curr[label]);$node.find('.next').text(data.next[label]);setTimeout(function($node){$node.addClass('flip')},50,$node)})}})},};return module})(Youkok||{});;var Youkok=(function(module){module.message={add:function(msg){var $msg_obj;for(var i=0;i<msg.length;i++){$msg_obj=$('<div class="alert alert-'+msg[i].type+'">'+msg[i].text+'<div class="alert-close"><i class="fa fa-times"></i></div></div>');$('#main .row:first').prepend($msg_obj);setTimeout(function($msg_obj_inner){$('.alert-close',$msg_obj_inner).trigger('click')},10000,$msg_obj)}},};return module})(Youkok||{});;var Youkok=(function(module){var data;module.init=function(){data=jQuery.parseJSON(SITE_DATA);moment.lang('en',{relativeTime:{future:"Om %s",past:"%s siden",s:"Noen få sekunder",m:"Ett minutt",mm:"%d minutter",h:"En time",hh:"%d timer",d:"en dag",dd:"%d dager",M:"En måned",MM:"%d måneder",y:"Et år",yy:"%d år"}});$('.moment-timestamp').each(function(){var $that=$(this);$that.html(moment($(this).data('ts')).fromNow())});$('.list-group-item a, .list-group-item .moment-timestamp').tooltip();Youkok.initSubModules()};module.initSubModules=function(){Youkok.search.init();Youkok.debug.init();if(Youkok.getData('view')=='archive'){Youkok.archive.init()}if(Youkok.getData('view')=='frontpage'){Youkok.frontpage.init()}};module.getData=function(key){return data[key]};return module})(Youkok||{})
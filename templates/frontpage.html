{% extends "base.html" %}
{% block content %}
<div class="row">
    <div class="col-md-3 col-sm-6 col-xs-12">
        <div class="frontpage-info-box">
            <span class="info-box-icon bg-aqua"><i class="fa fa-download"></i></span>
            <div class="info-box-content">
                <span class="info-box-text">Nedlastninger</span>
                <span class="info-box-number">{{ whole_number_format(FRONTPAGE.INFO_DOWNLOADS) }}</span>
            </div>
        </div>
    </div>
    <div class="col-md-3 col-sm-6 col-xs-12">
        <div class="frontpage-info-box">
            <span class="info-box-icon bg-red"><i class="fa fa-star"></i></span>
            <div class="info-box-content">
                <span class="info-box-text">Bidrag siste mnd</span>
                <span class="info-box-number">{{ whole_number_format(FRONTPAGE.INFO_NEW_ELEMENTS_THIS_MONTH) }}</span>
            </div>
        </div>
    </div>
    <div class="col-md-3 col-sm-6 col-xs-12">
        <div class="frontpage-info-box">
            <span class="info-box-icon bg-green"><i class="fa fa-archive"></i></span>
            <div class="info-box-content">
                <span class="info-box-text">Filer og linker</span>
                <span class="info-box-number">{{ whole_number_format(FRONTPAGE.INFO_FILES) }}</span>
            </div>
        </div>
    </div>
    <div class="col-md-3 col-sm-6 col-xs-12">
        <div class="frontpage-info-box">
            <span class="info-box-icon bg-yellow"><i class="fa fa-graduation-cap"></i></span>
            <div class="info-box-content">
                <span class="info-box-text">Fag med innhold</span>
                <span class="info-box-number">{{ whole_number_format(FRONTPAGE.INFO_NON_EMPTY_COURSES) }}</span>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-xs-12 col-sm-6 frontpage-box">
        <div class="list-header">
            <h2>Siste besøkte fag</h2>
            {% if FRONTPAGE.USER_LAST_VISITED_COURSES|length > 0 %}
                <a href="#" class="frontpage-box-clear" id="frontpage-empty-history" data-url="{{ path_for('clear_frontpage_box') }}" data-type="history">Fjern historikk</a>
            {% endif %}
        </div>
        <ul class="list-group">
            {% if FRONTPAGE.USER_LAST_VISITED_COURSES|length == 0 %}
                <li class="list-group-item"><em>Du har ikke besøkt noen fag</em></li>
            {% else %}
                {% for ELEMENT in FRONTPAGE.USER_LAST_VISITED_COURSES %}
                    <li class="list-group-item">
                        {% include "includes/element_listing.html" with {
                            'ELEMENT': ELEMENT,
                            'COURSE': true
                        } %}
                    </li>
                {% endfor %}
            {% endif %}
        </ul>
    </div>
    <div class="col-xs-12 col-sm-6 frontpage-box" id="user-favorites" data-url="{{ path_for('toggle_favorite') }}">
        <div class="list-header">
            <h2>Favoritter</h2>
            {% if FRONTPAGE.USER_FAVORITES|length > 0 %}
                <a href="#" class="frontpage-box-clear" id="frontpage-empty-favorites" data-url="{{ path_for('clear_frontpage_box') }}" data-type="favorites">Fjern favoritter</a>
            {% endif %}
        </div>
        <ul class="list-group" id="favorites-list">
            {% if FRONTPAGE.USER_FAVORITES|length == 0 %}
                <li class="list-group-item"><em>Du har ingen favoritter</em></li>
            {% else %}
                {% for ELEMENT in FRONTPAGE.USER_FAVORITES %}
                    <li class="list-group-item">
                        {% set content %}
                            <i title="Fjern favoritt" data-id="{{ ELEMENT.id }}" class="fa fa-times-circle star-remove"></i>
                        {% endset %}

                        {% include "includes/element_listing.html" with {
                            'ELEMENT': ELEMENT,
                            'CONTENT_INSIDE': content
                        } %}
                    </li>
                {% endfor %}
            {% endif %}
        </ul>
    </div>
</div>
<div class="row">
    <div class="col-xs-12 col-sm-6 frontpage-box">
        <div class="list-header">
            <h2>Nyeste</h2>
        </div>
        <ul class="list-group">
            {% if FRONTPAGE.LATEST_ELEMENTS|length == 0 %}
                <li class="list-group-item"><em>Det er ingenting her</em></li>
            {% else %}
                {% for ELEMENT in FRONTPAGE.LATEST_ELEMENTS %}
                    <li class="list-group-item">
                        {% set content %}
                            [<span class="moment-timestamp help" data-toggle="tooltip" title="{{ ELEMENT.addedPrettyAll }}" data-ts="{{ ELEMENT.added }}">Laster...</span>]
                        {% endset %}

                        {% include "includes/element_listing.html" with {
                            'ELEMENT': ELEMENT,
                            'CONTENT_OUTSIDE': content
                        } %}
                    </li>
                {% endfor %}
            {% endif %}
        </ul>
    </div>
    <div
            class="col-xs-12 col-sm-6 frontpage-box frontpage-module"
            data-url="{{ path_for('popular_elements') }}"
            data-template=".template-frontpage-popular-elements"
            data-template-empty=".template-frontpage-no-popular-elements"
    >
        <div class="list-header">
            <h2 class="can-i-be-inline">Mest populære</h2>
            <div class="btn-group">
                <button class="btn btn-default btn-sm dropdown-toggle" type="button" data-toggle="dropdown">
                    <span class="most-popular-label">
                        {% if FRONTPAGE.USER_PREFERENCES.DELTA_POST_POPULAR_ELEMENTS == FRONTPAGE.CONST.TODAY %}
                            I dag
                        {% elseif FRONTPAGE.USER_PREFERENCES.DELTA_POST_POPULAR_ELEMENTS == FRONTPAGE.CONST.WEEK %}
                            Denne uka
                        {% elseif FRONTPAGE.USER_PREFERENCES.DELTA_POST_POPULAR_ELEMENTS == FRONTPAGE.CONST.MONTH %}
                            Denne måneden
                        {% elseif FRONTPAGE.USER_PREFERENCES.DELTA_POST_POPULAR_ELEMENTS == FRONTPAGE.CONST.YEAR %}
                            Dette året
                        {% else %}
                            Alltid
                        {% endif %}
                    </span>
                    <span class="caret"></span>
                </button>
                <ul class="dropdown-menu home-most-popular-dropdown">
                    <li{% if FRONTPAGE.USER_PREFERENCES.DELTA_POST_POPULAR_ELEMENTS == FRONTPAGE.CONST.TODAY %} class="disabled"{% endif %}>
                    <a data-delta="{{ FRONTPAGE.CONST.TODAY }}" href="#">I dag</a>
                    </li>
                    <li{% if FRONTPAGE.USER_PREFERENCES.DELTA_POST_POPULAR_ELEMENTS == FRONTPAGE.CONST.WEEK %} class="disabled"{% endif %}>
                    <a data-delta="{{ FRONTPAGE.CONST.WEEK }}" href="#">Denne uka</a>
                    </li>
                    <li{% if FRONTPAGE.USER_PREFERENCES.DELTA_POST_POPULAR_ELEMENTS == FRONTPAGE.CONST.MONTH %} class="disabled"{% endif %}>
                    <a data-delta="{{ FRONTPAGE.CONST.MONTH }}" href="#">Denne måneden</a>
                    </li>
                    <li{% if FRONTPAGE.USER_PREFERENCES.DELTA_POST_POPULAR_ELEMENTS == FRONTPAGE.CONST.YEAR %} class="disabled"{% endif %}>
                    <a data-delta="{{ FRONTPAGE.CONST.YEAR }}" href="#">Dette året</a>
                    </li>
                    <li{% if FRONTPAGE.USER_PREFERENCES.DELTA_POST_POPULAR_ELEMENTS == FRONTPAGE.CONST.ALL %} class="disabled"{% endif %}>
                    <a data-delta="{{ FRONTPAGE.CONST.ALL }}" href="#">Alltid</a>
                    </li>
                </ul>
            </div>
        </div>
        <ul class="list-group">
            {% if FRONTPAGE.MOST_POPULAR_ELEMENTS|length == 0 %}
                <li class="list-group-item"><em>Det er ingenting her</em></li>
            {% else %}
                {% for ELEMENT in FRONTPAGE.MOST_POPULAR_ELEMENTS %}
                    <li class="list-group-item">
                        {% set content %}
                            [{{ whole_number_format(ELEMENT._downloads) }}]
                        {% endset %}

                        {% include "includes/element_listing.html" with {
                            'ELEMENT': ELEMENT,
                            'CONTENT_OUTSIDE': content
                        } %}
                    </li>
                {% endfor %}
            {% endif %}
        </ul>
    </div>
</div>
<div class="row">
    <div
            class="col-xs-12 col-sm-6 frontpage-box frontpage-module"
            data-url="{{ path_for('popular_courses') }}"
            data-template=".template-frontpage-popular-courses"
            data-template-empty=".template-frontpage-no-popular-courses"
    >
        <div class="list-header">
            <h2 class="can-i-be-inline">Mest populære fag</h2>
            <div class="btn-group">
                <button class="btn btn-default btn-sm dropdown-toggle" type="button" data-toggle="dropdown">
                    <span class="most-popular-label">
                        {% if FRONTPAGE.USER_PREFERENCES.DELTA_POST_POPULAR_COURSES == FRONTPAGE.CONST.TODAY %}
                            I dag
                        {% elseif FRONTPAGE.USER_PREFERENCES.DELTA_POST_POPULAR_COURSES == FRONTPAGE.CONST.WEEK %}
                            Denne uka
                        {% elseif FRONTPAGE.USER_PREFERENCES.DELTA_POST_POPULAR_COURSES == FRONTPAGE.CONST.MONTH %}
                            Denne måneden
                        {% elseif FRONTPAGE.USER_PREFERENCES.DELTA_POST_POPULAR_COURSES == FRONTPAGE.CONST.YEAR %}
                            Dette året
                        {% else %}
                            Alltid
                        {% endif %}
                    </span>
                    <span class="caret"></span>
                </button>
                <ul class="dropdown-menu home-most-popular-dropdown">
                    <li{% if FRONTPAGE.USER_PREFERENCES.DELTA_POST_POPULAR_COURSES == FRONTPAGE.CONST.TODAY %} class="disabled"{% endif %}>
                        <a data-delta="{{ FRONTPAGE.CONST.TODAY }}" href="#">I dag</a>
                    </li>
                    <li{% if FRONTPAGE.USER_PREFERENCES.DELTA_POST_POPULAR_COURSES == FRONTPAGE.CONST.WEEK %} class="disabled"{% endif %}>
                        <a data-delta="{{ FRONTPAGE.CONST.WEEK }}" href="#">Denne uka</a>
                    </li>
                    <li{% if FRONTPAGE.USER_PREFERENCES.DELTA_POST_POPULAR_COURSES == FRONTPAGE.CONST.MONTH %} class="disabled"{% endif %}>
                        <a data-delta="{{ FRONTPAGE.CONST.MONTH }}" href="#">Denne måneden</a>
                    </li>
                    <li{% if FRONTPAGE.USER_PREFERENCES.DELTA_POST_POPULAR_COURSES == FRONTPAGE.CONST.YEAR %} class="disabled"{% endif %}>
                        <a data-delta="{{ FRONTPAGE.CONST.YEAR }}" href="#">Dette året</a>
                    </li>
                    <li{% if FRONTPAGE.USER_PREFERENCES.DELTA_POST_POPULAR_COURSES == FRONTPAGE.CONST.ALL %} class="disabled"{% endif %}>
                        <a data-delta="{{ FRONTPAGE.CONST.ALL }}" href="#">Alltid</a>
                    </li>
                </ul>
            </div>
        </div>
        <ul class="list-group">
            {% if FRONTPAGE.MOST_POPULAR_COURSES|length == 0 %}
                <li class="list-group-item"><em>Det er ingenting her</em></li>
            {% else %}
                {% for ELEMENT in FRONTPAGE.MOST_POPULAR_COURSES %}
                    <li class="list-group-item">
                        {% set content %}
                            [ca. {{ whole_number_format(ELEMENT._downloads) }}]
                        {% endset %}

                        {% include "includes/element_listing.html" with {
                            'ELEMENT': ELEMENT,
                            'CONTENT_OUTSIDE': content,
                            'COURSE': true
                        } %}
                    </li>
                {% endfor %}
            {% endif %}
        </ul>
    </div>
    <div class="col-xs-12 col-sm-6 frontpage-box">
        <div class="list-header">
            <h2>Siste besøkte fag</h2>
        </div>
        <ul class="list-group">
            {% if FRONTPAGE.LATEST_VISITED|length == 0 %}
                <li class="list-group-item"><em>Det er ingenting her</em></li>
            {% else %}
                {% for ELEMENT in FRONTPAGE.LATEST_VISITED %}
                    <li class="list-group-item">
                        {% include "includes/element_listing.html" with {
                            'ELEMENT': ELEMENT,
                            'COURSE': true
                        } %}
                    </li>
                {% endfor %}
            {% endif %}
        </ul>
    </div>
</div>
{% include "jstemplates/popular_elements.html" %}
{% include "jstemplates/popular_courses.html" %}
{% endblock %}

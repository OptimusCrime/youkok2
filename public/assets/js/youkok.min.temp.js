var Youkok=(function(module){var changeMostPopular=function(e){e.preventDefault();$module_obj=$(this).closest('.frontpage-module');$module_obj.find('.most-popular-label').html($('a',this).html());$module_obj.find('li.disabled').removeClass('disabled');$(this).addClass('disabled');var module_id=$module_obj.data('id');var module_variable=$module_obj.data('variable');var ajax_data={module:module_id};ajax_data[module_variable]=$('a',$(this)).data('delta');$.ajax({cache:!1,type:"post",url:"processor/module/update",data:ajax_data,success:function(json){if(json.code==200){$module_obj.find('.list-group').slideUp(400,function(){if(module_id==1||module_id==2){if(json.data.length>0){var template_frontpage_popular;if(module_id==1){template_frontpage_popular=_.template($('script.template-frontpage-popular-elements').html())}
else{template_frontpage_popular=_.template($('script.template-frontpage-popular-courses').html())}
$module_obj.find('.list-group').html(template_frontpage_popular({'elements':json.data}));$module_obj.find('.list-group a').tooltip()}
else{if(module_id==1){$module_obj.find('.list-group').html(_.template($('script.template-frontpage-no-popular-elements').html()))}
else{$module_obj.find('.list-group').html(_.template($('script.template-frontpage-no-popular-courses').html()))}}
$module_obj.find('.list-group').slideDown(400)}})}
else{alert('Noe gikk visst galt her. Ups!')}}})};var removeFavorite=function(e){e.preventDefault();$el=$(this);if(!$el.data('disabled')){$el.data('disabled','true');$.ajax({cache:!1,type:"post",url:'processor/favorite',data:{id:$el.data('id'),type:'remove'},success:function(json){if(json.code==200){$el.parent().slideUp(function(){$(this).remove();if($('#favorites-list li').length==0){$('#favorites-list').html('<li class="list-group-item" style="display: none;"><em>Du har ingen favoritter...</em></li>');$('#favorites-list li').slideDown()}});Youkok.message.add(json.msg)}
else{alert('Noe gikk visst galt her. Ups!');$el.removeData('disabled')}}})}};module.frontpage={init:function(){$('.home-most-popular-dropdown li').on('click',changeMostPopular);$('.star-remove').on('click',removeFavorite)},};return module})(Youkok||{});var Youkok=(function(module){module.register={init:function(){var register_email_checked=!1;var register_email_value="";$('#register-form input').on('keyup',function(){var $that=$(this);var $that_parent=$that.parent();var element_id=this.id;if(this.id=='register-form-email'){if(Youkok.utilities.validateEmail($that.val())){if($that_parent.hasClass('has-error')){$that_parent.removeClass('has-error')}
$('#register-form-email-error1').css('color','');if(register_email_value!=$('#register-form-email').val()){register_email_value=$('#register-form-email').val();register_email_checked=!1;$.ajax({cache:!1,type:"post",url:"processor/register/email",data:{email:$('#register-form-email').val()},success:function(json){if(json.code==200){register_email_checked=!0;$('#register-form-email-error2').css('color','');$('#register-form-email').trigger('keyup')}
else{$('#register-form-email-error2').css('color','red')}}})}}
else{if(!$that_parent.hasClass('has-error')){$that_parent.addClass('has-error')}
$('#register-form-email-error1').css('color','red')}}
else if(this.id=='register-form-password1'){if($that.val().length<7){if(!$that_parent.hasClass('has-error')){$that_parent.addClass('has-error')}
$('#register-form-password-error1').css('color','red');$('#register-form-password2').prop('disabled',!0).val('').parent().removeClass('has-error');$('#register-form-password-error2').css('color','')}
else{if($that_parent.hasClass('has-error')){$that_parent.removeClass('has-error')}
$('#register-form-password-error1').css('color','');$('#register-form-password2').prop('disabled',!1)}
if($('#register-form-password2').val().length!=0){if($('#register-form-password1').val()!=$('#register-form-password2').val()){if(!$('#register-form-password2').parent().hasClass('has-error')){$('#register-form-password2').parent().addClass('has-error')}
$('#register-form-password-error2').css('color','red')}
else{if($('#register-form-password2').parent().hasClass('has-error')){$('#register-form-password2').parent().removeClass('has-error')}
$('#register-form-password-error2').css('color','')}}}
else{if($('#register-form-password1').val()!=$('#register-form-password2').val()){if(!$that_parent.hasClass('has-error')){$that_parent.addClass('has-error')}
$('#register-form-password-error2').css('color','red')}
else{if($that_parent.hasClass('has-error')){$that_parent.removeClass('has-error')}
$('#register-form-password-error2').css('color','')}}
if($('#register-form .has-error').length==0&&register_email_checked==!0&&Youkok.utilities.validateEmail($('#register-form-email').val())&&$('#register-form-password1').val().length>6&&$('#register-form-ret').is(':checked')){$('#register-form-submit').prop('disabled',!1)}
else{$('#register-form-submit').prop('disabled',!0)}});$('#register-form-ret').on('change',function(){$('#register-form-password1').trigger('keyup')})},};return module})(Youkok||{});var Youkok=(function(module){var addLoginListeners=function(){$('#dropdown-menu-opener').on('click',function(e){setTimeout(function(){$('#login-email').focus()},100)})};var addProfileListeners=function(){$('#profile-edit-info-form input').on('keyup',function(){if(this.id=='register-form-email'){var $that=$(this);var $that_parent=$that.parent();if(Youkok.utilities.validateEmail($that.val())){if($that_parent.hasClass('has-error')){$that_parent.removeClass('has-error')}
$('#register-form-email-error1').css('color','');$('#register-form-email-error2').css('color','');if($('#register-form-email').data('original')!=$('#register-form-email').val()){$.ajax({cache:!1,type:"post",url:"processor/register/email",data:{email:$('#register-form-email').val(),ignore:!0},success:function(json){if(json.code==200){$('#register-form-email-error2').css('color','')}
else{$('#register-form-email-error2').css('color','red')}}})}}
else{if(!$that_parent.hasClass('has-error')){$that_parent.addClass('has-error')}
$('#register-form-email-error1').css('color','red');$('#register-form-email-error2').css('color','')}}})};module.user={init:function(){addLoginListeners();if(Youkok.getData('online')==!0){addProfileListeners()}},};return module})(Youkok||{});var Youkok=(function(module){var initOnline=function(){$('#archive-heading-star').on('click',toggleFavorite)};var toggleFavorite=function(){var $that=$(this);var favorite_type='add';if($that.hasClass('archive-heading-star-1')){favorite_type='remove'}
$.ajax({cache:!1,type:"post",url:'processor/favorite',data:{id:$that.data('archive-id'),type:favorite_type},success:function(json){if(json.code==200){if(favorite_type=='add'){$that.removeClass('archive-heading-star-0').addClass('archive-heading-star-1')}
else{$that.removeClass('archive-heading-star-1').addClass('archive-heading-star-0')}
Youkok.message.add(json.msg)}
else{alert('Noe gikk visst galt her. Ups!')}}})};var itemDropdownOpen=function(){var $caret=$('i',this);var $dropdown=$('.archive-dropdown-content',this);if($dropdown.is(':visible')){$dropdown.slideUp(400,function(){$caret.removeClass('fa-caret-up').addClass('fa-caret-down')})}
else{$dropdown.slideDown(400,function(){$caret.removeClass('fa-caret-down').addClass('fa-caret-up')})}};var itemDropdownClose=function(e){e.preventDefault();$(this).parent().parent().parent().parent().find('.archive-item-dropdown-arrow').trigger('click')};var getHistory=function(){$.ajax({cache:!1,type:"post",url:"processor/history/get",data:{id:Youkok.getData('archive_id'),},success:function(json){if(json.data.length>0){var template_sidebar_history=_.template($('script.template-sidebar-history').html());$('#archive-history ul').html(template_sidebar_history({'histories':json.data}))}
else{var template_sidebar_history=_.template($('script.template-sidebar-no-history').html());$('#archive-history ul').html(template_sidebar_history())}}})};module.archive={init:function(){$('.archive-item-dropdown').on('click',itemDropdownOpen);$('.archive-dropdown-close').on('click',itemDropdownClose);getHistory();Youkok.countdown.init();if(Youkok.getData('online')==!0){initOnline()}},};return module})(Youkok||{});var Youkok=(function(module){module.forgottenPassword={init:function(){$('#forgotten-password-new-form input').on('keyup',function(){var $that=$(this);var $that_parent=$that.parent();var element_id=this.id;if(this.id=='forgotten-password-new-form-password1'){if($that.val().length<7){if(!$that_parent.hasClass('has-error')){$that_parent.addClass('has-error')}
$('#forgotten-password-new-form-password-error1').css('color','red');$('#forgotten-password-new-form-password2').prop('disabled',!0).val('').parent().removeClass('has-error');$('#forgotten-password-new-form-password-error2').css('color','')}
else{if($that_parent.hasClass('has-error')){$that_parent.removeClass('has-error')}
$('#forgotten-password-new-form-password-error1').css('color','');$('#forgotten-password-new-form-password2').prop('disabled',!1)}
if($('#forgotten-password-new-form-password2').val().length!=0){if($('#forgotten-password-new-form-password1').val()!=$('#forgotten-password-new-form-password2').val()){if(!$('#forgotten-password-new-form-password2').parent().hasClass('has-error')){$('#forgotten-password-new-form-password2').parent().addClass('has-error')}
$('#forgotten-password-new-form-password-error2').css('color','red')}
else{if($('#forgotten-password-new-form-password2').parent().hasClass('has-error')){$('#forgotten-password-new-form-password2').parent().removeClass('has-error')}
$('#forgotten-password-new-form-password-error2').css('color','')}}}
else{if($('#forgotten-password-new-form-password1').val()!=$('#forgotten-password-new-form-password2').val()){if(!$that_parent.hasClass('has-error')){$that_parent.addClass('has-error')}
$('#forgotten-password-new-form-password-error2').css('color','red')}
else{if($that_parent.hasClass('has-error')){$that_parent.removeClass('has-error')}
$('#forgotten-password-new-form-password-error2').css('color','')}}
if($('#forgotten-password-new-form .has-error').length==0&&$('#forgotten-password-new-form-password1').val().length>6){$('#forgotten-password-new-form-submit').prop('disabled',!1)}
else{$('#forgotten-password-new-form-submit').prop('disabled',!0)}})},};return module})(Youkok||{});$(document).ready(function(){Youkok.init()});var Youkok=(function(module){module.utilities={validateEmail:function(email){var rgx=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;return rgx.test(email)},validateUrl:function(url){var rgx=new RegExp("^(http[s]?:\\/\\/(www\\.)?|ftp:\\/\\/(www\\.)?|www\\.){1}([0-9A-Za-z-\\.@:%_\+~#=]+)+((\\.[a-zA-Z]{2,3})+)(/(.)*)?(\\?(.)*)?");return rgx.test(url)},prettyFileSize:function(bytes,si){var thresh=si?1000:1024;if(bytes<thresh){return bytes+' B'}
var units=si?['kB','MB','GB','TB','PB','EB','ZB','YB']:['KiB','MiB','GiB','TiB','PiB','EiB','ZiB','YiB'];var u=-1;do{bytes=bytes/thresh;++u}while(bytes>=thresh);return bytes.toFixed(1)+' '+units[u]},};return module})(Youkok||{});var Youkok=(function(module){var toggleQueries=function(e){e.preventDefault();var $that=$(this);if($('#cache-load').is(':visible')){$('#cache-load').slideUp(400,function(){$('#toggle-cache-loads span').html('Vis')})}
if($('#queries').is(':visible')){$('#queries').slideUp(400,function(){$('span',$that).html('Vis')})}
else{$('#queries').slideDown(400,function(){$('span',$that).html('Skjul')})}};var toggleCache=function(e){e.preventDefault();var $that=$(this);if($('#queries').is(':visible')){$('#queries').slideUp(400,function(){$('#toggle-queries span').html('Vis')})}
if($('#cache-load').is(':visible')){$('#cache-load').slideUp(400,function(){$('span',$that).html('Vis')})}
else{$('#cache-load').slideDown(400,function(){$('span',$that).html('Skjul')})}};module.debug={init:function(){$('#toggle-queries').on('click',toggleQueries);$('#toggle-cache-loads').on('click',toggleCache)},};return module})(Youkok||{});var Youkok=(function(module){module.admin=module.admin||{};var initGenericListeners=function(){$('[data-widget="collapse"]').on('click',function(e){e.preventDefault();$(this).closest('.box').find('.box-body, .box-footer').each(function(){if($(this).is(':visible')){$(this).stop().slideUp()}
else{$(this).stop().slideDown()}})});$('.treeview a').on('click',function(e){var $obj=$(this);if($obj.attr('href')=='#'){e.preventDefault();var $parent=$obj.parent();var $grand_parent=$parent.parent();var $submenu=$parent.find('ul').eq(0);if($submenu){if($submenu.is(':visible')){$submenu.stop().slideUp(400,function(){$parent.removeClass('active');$(this).find('ul').hide();$(this).find('li.active').removeClass('active')})}
else{$grand_parent.find('.treeview.active > ul:visible').stop().slideUp(400,function(){$(this).parent().removeClass('active');$(this).parent().find('ul').hide();$(this).parent().find('li.active').removeClass('active')});$submenu.stop().slideDown(400,function(){$parent.addClass('active')})}}}});$('.sidebar-toggle').on('click',function(e){e.preventDefault();var $body=$('body');if($body.hasClass('sidebar-collapse')){$body.removeClass('sidebar-collapse')}
else{$body.addClass('sidebar-collapse')}})};var initSubViews=function(){if(Youkok.getData('view')=='admin_home'){Youkok.admin.home.init()}};module.admin.init=function(){initGenericListeners();initSubViews()};return module})(Youkok||{});var admin_home_graph={lang:{loading:'Laster...',months:['Januar','Februar','Mars','April','Mai','Juni','Juli','August','September','Oktober','November','Desember'],weekdays:['Søndag','Mandag','Tirsdag','Onsdag','Torsdag','Fredag','Lørdag'],shortMonths:['Jan','Feb','Mar','Apr','Mai','Jun','Jul','Aug','Sep','Okt','Nov','Des'],},chart:{renderTo:'admin-home-graph',height:200,},title:{text:'',style:{display:'none'}},xAxis:{type:'datetime',dateTimeLabelFormats:{month:'%e. %b',year:'%b'},},yAxis:{min:0,title:{enabled:!1,},},tooltip:{headerFormat:'<b>Antall totale nedlastninger</b><br>',pointFormat:'{point.x:%e. %b %Y}: {point.y:.0f}'},legend:{enabled:!1},plotOptions:{area:{fillColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,Highcharts.getOptions().colors[0]],[1,Highcharts.Color(Highcharts.getOptions().colors[0]).setOpacity(0).get('rgba')]]},marker:{radius:2},lineWidth:1,states:{hover:{lineWidth:1}},threshold:null}},series:[{name:'Populæritet',data:[],}]};var Youkok=(function(module){module.admin=module.admin||{};var initBoxes=function(){fetchBoxes();setInterval(fetchBoxes,30000)};var fetchBoxes=function(){$.ajax({cache:!1,url:'processor/admin/homeboxes',success:function(json){if(json.code==200){$('#admin-home-downloads').html(json.data.downloads);$('#admin-home-users').html(json.data.users);$('#admin-home-files').html(json.data.files);$('#admin-home-courses').html(json.data.courses)}}})};var initGraph=function(){$.ajax({cache:!1,url:'processor/admin/homegraph',success:function(json){if(json.code==200){$('#admin-home-graph-delta').html(json.data.delta);var admin_home_graph_series=[];for(var i=0;i<json.data.graph.length;i++){var plot_date=json.data.graph[i].date.split('-');admin_home_graph_series.push([Date.UTC(parseInt(plot_date[0]),parseInt(plot_date[1])-1,parseInt(plot_date[2]),0,0,0),json.data.graph[i].downloads])}
admin_home_graph.series[0].data=admin_home_graph_series;new Highcharts.Chart(admin_home_graph)}}})};module.admin.home={init:function(){initBoxes();initGraph()}};return module})(Youkok||{});var Youkok=(function(module){var num_of_files_uploaded=0;var fileuploaderInit=function(){$('#archive-create-file-form').fileupload({url:'processor/file/create?format=html&parent='+Youkok.getData('archive_id'),add:fileuploaderAdd,done:fileuploaderDone,progressall:fileuploaderProgressAll,})};var fileuploaderAdd=function(e,data){var file_object=data.files[data.files.length-1];var file_valid=!1;var file_name=file_object.name;var file_type_split=file_object.name.split('.');var file_type=file_type_split[file_type_split.length-1].toLowerCase();var accepted_files=Youkok.getData('file_types');for(var i=0;i<accepted_files.length;i++){if(accepted_files[i]==file_type){file_valid=!0;break}}
if(file_valid){var container_html='<div class="fileupload-file">';container_html+='    <strong>';container_html+=file_name;container_html+='    </strong>';container_html+='    <p>';container_html+=Youkok.utilities.prettyFileSize(file_object.size,!0);container_html+='    </p>';container_html+='    <div class="fileupload-file-remove">';container_html+='        <span>Fjern <i class="fa fa-times"></i></span>';container_html+='    </div>';container_html+='</div>';var $container=$(container_html);var $button=$('<button style="display: none;">x</button>');$container.append($button);data.context=$button;$button.click(function(){data.submit()});$('#fileupload-files-inner').append($container)}
else{var error=[{'text':'<p>Filtypen .'+file_type+' er ikke godkjent på Youkok2. Dersom du syntes denne \
                    filtypen burde godkjennes, kan du ta kontakt. Kontaktinformasjon nederst på siden.</p>','type':'danger',},];Youkok.message.add(error)}};var fileuploaderDone=function(e,data){num_of_files_uploaded++;if(num_of_files_uploaded==($('.fileupload-file').length-1)){window.location.reload()}};var fileuploaderProgressAll=function(e,data){var progress=parseInt(data.loaded/data.total)*100;$('#progress .bar').css({width:progress+'%'})};var expand=function(){if($('#archive-create-file-div').is(':visible')){$('#archive-create-file-div').stop().slideUp()}
else{$('#archive-create-folder-div').stop().slideUp();$('#archive-create-link-div').stop().slideUp();$('#archive-create-file-div').stop().slideDown()}};var collaps=function(e){if($(this).attr('href')=='#'){e.preventDefault();$('#archive-create-file-div').stop().slideUp(400)}};var remove=function(){$(this).parent().remove()};var submit=function(){$('#fileupload-files-inner button').each(function(){$(this).trigger('click')});$('#archive-create-file-form-submit').html('Laster opp....').prop('disabled',!0);return !1};module.createFile={init:function(){$('#archive-create-file').on('click',expand);$('#archive-create-file-div a').on('click',collaps);$('#fileupload-files').on('click','.fileupload-file-remove',remove);$('#archive-create-file-form').on('submit',submit);fileuploaderInit()},};return module})(Youkok||{});var Youkok=(function(module){var autocomplete_title_xhr=null;var working=!1;var expand=function(){if($('#archive-create-link-div').is(':visible')){$('#archive-create-link-div').stop().slideUp()}
else{$('#archive-create-link-div').stop().slideDown(400,function(){$('archive-create-link-url').focus()});$('#archive-create-file-div').stop().slideUp();$('#archive-create-folder-div').stop().slideUp()}};var collaps=function(e){e.preventDefault();$('#archive-create-link-div').stop().slideUp(400,function(){$('#archive-create-link-url').val('');$('#archive-create-link-name').val('');$('#archive-create-link-name-holder').hide();$('#archive-create-link-form-submit').html('Post link').prop('disabled',!0)})};var keyup=function(){var link_url=$(this).val();if(Youkok.utilities.validateUrl(link_url)){$('#archive-create-link-form-submit').html('Vent litt').prop('disabled',!0);if(autocomplete_title_xhr!==null){autocomplete_title_xhr.abort()}
autocomplete_title_xhr=$.ajax({cache:!1,type:'post',url:'processor/link/title',data:{url:link_url,},success:function(json){if(json.code==200){$('#archive-create-link-name').val(json.title)}
else if(json.code==400){$('#archive-create-link-name').val('')}
if($('#archive-create-link-name-holder').is(':hidden')){$('#archive-create-link-name-holder').slideDown(400,function(){$('#archive-create-link-form-submit').html('Post link').prop('disabled',!1)})}
else{$('#archive-create-link-form-submit').html('Post link').prop('disabled',!1)}}})}
else{$('#archive-create-link-form-submit').html('Ikke gyldig link').prop('disabled',!0)}};var submit=function(){var link_name=$('#archive-create-link-url').val();if(!Youkok.utilities.validateUrl(link_name)){Youkok.message.add([{'text':'\''+link_name+' \' er ikke en gyldig URL.','type':'danger'}])}
else{if(!working){working=!0;$('#archive-create-link-form-submit').html('Jobber...').prop('disabled',!0);$.ajax({cache:!1,type:'post',url:'processor/link/create',data:{id:Youkok.getData('archive_id'),url:$('#archive-create-link-url').val(),name:$('#archive-create-link-name').val()},success:function(json){working=!1;if(json.code==200){window.location.reload()}
else if(json.code==400){Youkok.message.add([{'text':'Et element med denne URLen finnes fra før!','type':'danger'}]);$('#archive-create-link-form-submit').html('Post link').prop('disabled',!1)}
else if(json.code==401){Youkok.message.add([{'text':'Navnet på linken er for kort. Minst 4 tegn. La feltet så tomt hvis du ønsker å bruke URLen.','type':'danger'}]);$('#archive-create-link-form-submit').html('Post link').prop('disabled',!1)}
else{Youkok.message.add([{'text':'Noe gikk visst galt her!','type':'danger'}]);$('#archive-create-link-form-submit').html('Post link').prop('disabled',!1)}}})}}
return !1};module.createLink={init:function(){$('#archive-create-link').on('click',expand);$('#archive-create-link-div a').on('click',collaps);$('#archive-create-link-url').on('keyup',keyup);$('#archive-create-link-form').on('submit',submit)},};return module})(Youkok||{});var Youkok=(function(module){var working=!1;var expand=function(){if($('#archive-create-folder-div').is(':visible')){$('#archive-create-folder-div').stop().slideUp()}
else{$('#archive-create-folder-div').stop().slideDown(400,function(){$('archive-create-folder-name').focus()});$('#archive-create-file-div').stop().slideUp();$('#archive-create-link-div').stop().slideUp()}};var collaps=function(e){e.preventDefault();$('#archive-create-folder-div').stop().slideUp(400,function(){$('#archive-create-folder-name').val('')})};var keyup=function(){if(!working&&$(this).val().length>3){$('#archive-create-folder-form-submit').prop('disabled',!1)}
else{$('#archive-create-folder-form-submit').prop('disabled',!0)}};var submit=function(){if($('#archive-create-folder-name').val().length==0){alert('Error: Du har ikke gitt mappen noen navn!')}
else{if(!working){working=!0;$('#archive-create-folder-form-submit').html('Jobber...').prop('disabled',!0);$.ajax({cache:!1,type:"post",url:'processor/folder/create',data:{id:Youkok.getData('archive_id'),name:$('#archive-create-folder-name').val()},success:function(json){if(json.code==200){window.location.reload()}
else if(json.code==400){working=!1;Youkok.message.add([{'text':'Navnet på elementet er fort kort. Minst 4 tegn.','type':'danger'}]);$('#archive-create-folder-form-submit').html('Lagre').prop('disabled',!1)}
else{Youkok.message.add([{'text':'Noe gikk visst galt her!','type':'danger'}]);$('#archive-create-folder-form-submit').html('Lagre').prop('disabled',!1)}}})}}
return !1};module.createDirectory={init:function(){$('#archive-create-folder').on('click',expand);$('#archive-create-folder-div a').on('click',collaps);$('#archive-create-folder-name').on('keyup',keyup);$('#archive-create-folder-form').on('submit',submit)},};return module})(Youkok||{});var Youkok=(function(module){var courses;var initBloodhound=function(){courses=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace('course'),queryTokenizer:Bloodhound.tokenizers.whitespace,limit:10,prefetch:'processor/search/courses.json'});courses.initialize()};var initTypeahead=function(){if(Youkok.getData('cache_time')!=localStorage.getItem('ts')){localStorage.clear();localStorage.setItem('ts',Youkok.getData('cache_time'))}
$('#prefetch .typeahead, #prefetch2 .typeahead').typeahead({hint:!1,highlight:!0},{name:'courses',displayKey:'course',source:courses.ttAdapter()}).on('typeahead:selected',function($e,datum){window.location.href=datum.url})};module.search={init:function(){initBloodhound();initTypeahead()}};return module})(Youkok||{});var Youkok=(function(module){module.general={init:function(){$('#login-dropdown label, #login-dropdown input').on('click',function(e){e.stopPropagation()})},};return module})(Youkok||{});var Youkok=(function(module){var template='<div class="time">';template+='    <span class="count curr top">00</span>';template+='    <span class="count next top">00</span>';template+='    <span class="count next bottom">00</span>';template+='    <span class="count curr bottom">00</span>';template+='    <span class="label"></span>';template+='</div>';var labels=['dager','timer','minutter','sekunder'],currDate='00:00:00:00',nextDate='00:00:00:00',$countdown_container=$('.countdown-wrapper');var strfobj=function(str){var parsed=str.split(':'),obj={};labels.forEach(function(label,i){obj[label]=parsed[i]});return obj};var diff=function(obj1,obj2){var diff=[];labels.forEach(function(key){if(obj1[key]!==obj2[key]){diff.push(key)}});return diff};var callback=function(event){var newDate=event.strftime('%D:%H:%M:%S'),data;if(newDate!==nextDate){currDate=nextDate;nextDate=newDate;data={'curr':strfobj(currDate),'next':strfobj(nextDate)};diff(data.curr,data.next).forEach(function(label){var selector='.%s'.replace(/%s/,label),$node=$countdown_container.find(selector);$node.removeClass('flip');$node.find('.curr').text(data.curr[label]);$node.find('.next').text(data.next[label]);setTimeout(function($node){$node.addClass('flip')},50,$node)})}};module.countdown={init:function(){var initData=strfobj(currDate);labels.forEach(function(label,i){var $section=$($.parseHTML(template));$section.addClass(label);$section.find('.label').html(label);$countdown_container.append($section)});$countdown_container.countdown($countdown_container.data('exam'),callback)},};return module})(Youkok||{});var Youkok=(function(module){module.grayboxes={init:function(){if($('#archive-sidebar-newest-inner').length>0){$.ajax({cache:!1,url:'processor/graybox/newest',success:function(json){var template_sidebar_newest=_.template($('script.template-sidebar-newest').html());$('#archive-sidebar-newest-inner').html(template_sidebar_newest({'elements':json.data}));$('#archive-sidebar-newest-inner .moment-timestamp').each(function(){var $that=$(this);$that.html(moment($(this).data('ts')).fromNow())});$('#archive-sidebar-newest-inner .moment-timestamp').tooltip()}})}
if($('#archive-sidebar-popular-inner').length>0){$.ajax({cache:!1,url:'processor/graybox/popular',success:function(json){var template_sidebar_popular=_.template($('script.template-sidebar-popular').html());$('#archive-sidebar-popular-inner').html(template_sidebar_popular({'elements':json.data}));$('#archive-sidebar-popular-inner a').tooltip()}})}
if($('#archive-sidebar-numbers-inner').length>0){$.ajax({cache:!1,url:'processor/graybox/commits',success:function(json){var template_sidebar_commits=_.template($('script.template-sidebar-commits').html());$('#archive-sidebar-numbers-inner').html(template_sidebar_commits({'commits':json.data}))}})}},};return module})(Youkok||{});var Youkok=(function(module){var autoClose=function(){if($('.alert').length>0){$('.alert').each(function(){if(!$(this).hasClass('no-close-auto')){setTimeout(function(target){$(target).find('.alert-close').trigger('click')},10000,$(this))}})}};var close=function(){$(this).parent().slideUp(400,function(){$(this).remove()})};module.message={init:function(){autoClose();$('#main').on('click','.alert-close',close)},add:function(msg){var $msg_obj;for(var i=0;i<msg.length;i++){$msg_obj=$('<div class="alert alert-'+msg[i].type+'">'+msg[i].text+'<div class="alert-close"><i class="fa fa-times"></i></div></div>');$('#main .row:first').prepend($msg_obj);setTimeout(function($msg_obj_inner){$('.alert-close',$msg_obj_inner).trigger('click')},10000,$msg_obj)}},};return module})(Youkok||{});var Youkok=(function(module){var data;var initSubModules=function(){Youkok.user.init();Youkok.message.init();Youkok.general.init();Youkok.grayboxes.init();Youkok.search.init();Youkok.debug.init();if(Youkok.getData('view')=='archive'){Youkok.archive.init();Youkok.createFile.init();Youkok.createLink.init();if(Youkok.getData('online')==!0){Youkok.createDirectory.init()}}
if(Youkok.getData('view')=='frontpage'){Youkok.frontpage.init()}
if(Youkok.getData('view')=='forgotten-password'||Youkok.getData('view')=='profile'){Youkok.forgottenPassword.init()}
if(Youkok.getData('view')=='register'){Youkok.register.init()}
if(Youkok.getData('admin_view')){Youkok.admin.init()}};module.init=function(){data=jQuery.parseJSON(SITE_DATA);moment.locale('en',{relativeTime:{future:"Om %s",past:"%s siden",s:"Noen få sekunder",m:"Ett minutt",mm:"%d minutter",h:"En time",hh:"%d timer",d:"en dag",dd:"%d dager",M:"En måned",MM:"%d måneder",y:"Et år",yy:"%d år"}});_.templateSettings.variable='rc';$('.moment-timestamp').each(function(){var $that=$(this);$that.html(moment($(this).data('ts')).fromNow())});$('.list-group-item a, .list-group-item .moment-timestamp').tooltip();initSubModules()};module.getData=function(key){return data[key]};return module})(Youkok||{})